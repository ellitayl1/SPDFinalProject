{% extends "base.html" %}

{% block title %}Resource Details{% endblock %}

{% block content %}
<h2>{{ resource[2] }}</h2>
<p>{{ resource[3] }}</p>
<p><strong>Category:</strong> {{ resource[5] }}</p>
<p><strong>Availability:</strong> {{ resource[6] }}</p>
<p><strong>Date Posted:</strong> {{ resource[7] }}</p>

{% if resource[4] %}
    <h3>Image:</h3>
    <img src="{{ url_for('static', filename=resource[4]) }}" alt="Resource Image" style="max-width: 300px;">
{% endif %}

<h3>Reviews</h3>
<ul>
    {% if reviews %}
        {% for review in reviews %}
            <li>
                <strong>Rating:</strong> {{ review[1] }} / 5
                <p>{{ review[2] }}</p>
                <small>Reviewed by {{ review[4] }} on {{ review[3] }}</small>
            </li>
        {% endfor %}
    {% else %}
        <p>No reviews yet for this resource.</p>
    {% endif %}
</ul>

<h3>Leave a Review</h3>
<form method="POST" action="{{ url_for('add_review_route', user_id=resource[1]) }}">
    <label for="rating">Rating:</label>
    <input type="number" id="rating" name="rating" min="1" max="5" required>
    <br>
    <label for="comment">Comment:</label>
    <textarea id="comment" name="comment" required></textarea>
    <br>
    <button type="submit">Submit Review</button>
</form>

{% if session['user_id'] == resource[1] %}
    <form method="POST" action="{{ url_for('delete_resource', resource_id=resource[0]) }}" style="margin-top: 20px;">
        <button type="submit" onclick="return confirm('Are you sure you want to delete this resource?');">Delete Resource</button>
    </form>
{% endif %}

{% endblock %}
